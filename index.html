<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Kent Notasyonu v10</title>
        <link rel="stylesheet" href="styles.css" />
        <link href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.css" rel="stylesheet" />

        <!-- <link rel="stylesheet" href="./dist/leaflet/leaflet.css" />
        <script src="./dist/leaflet/leaflet-src.js"></script>
        <script src="./dist/proj4.js"></script>
        <script src="./dist/tailwinds.3.4.5.js"></script>
        <script src="./dist/Tone.js"></script>
        <script src="./dist/turf.min.js"></script> -->

        <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/proj4@2.11.0/dist/proj4.min.js"></script>
        <script src="http://unpkg.com/tone"></script>
        <script src="https://cdn.tailwindcss.com"></script>
        <script src="https://unpkg.com/@turf/turf@6/turf.min.js"></script>
    </head>
    <body class="bg-gradient-to-br from-blue-50 to-blue-100 min-h-screen py-8 px-4">
        <div hidden class="absolute top-1 right-1">
            <select
                tabindex="-1"
                id="displayDensity"
                style="z-index: 1000"
                class="p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            >
                <option value="cozy">Cozy</option>
                <option value="comfy" selected>Comfy</option>
                <option value="compact">Compact</option>
            </select>
        </div>
        <div class="max-w-6xl mx-auto bg-white rounded-lg shadow-lg p-6 relative">
            <div class="relative h-96 rounded-lg overflow-hidden mb-6">
                <div id="map" class="w-full h-full"></div>
                <div
                    id="coordinates"
                    class="absolute bottom-2 left-2 bg-white bg-opacity-75 text-sm text-gray-700 py-1 px-2 rounded-md shadow-md"
                >
                    Coordinates: <span style="font-style: italic">hover on map</span>
                </div>
            </div>

            <div class="bg-gray-100 p-6 rounded-lg mb-6">
                <div id="neighborhoodSelector" class="mb-6 hidden">
                    <div class="flex items-center">
                        <label for="neighborhoodSelect" class="font-bold text-gray-700 mr-4 whitespace-nowrap"
                            >Select a neighborhood:</label
                        >
                        <select
                            id="neighborhoodSelect"
                            class="flex-grow p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                        ></select>
                    </div>
                </div>
                <div class="flex flex-col md:flex-row justify-between items-start space-y-6 md:space-y-0 md:space-x-6">
                    <div id="musicControls" class="hidden flex-grow">
                        <h3 class="text-lg font-bold mb-4 text-gray-800">Music Controls</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="flex items-center">
                                    <span class="mr-2 text-gray-700 whitespace-nowrap">Tempo:</span>
                                    <div class="flex-grow relative">
                                        <input type="range" id="tempoRange" min="60" max="180" value="128" class="w-full" />
                                        <div id="tempoTicks" class="absolute w-full" style="top: 20px"></div>
                                    </div>
                                    <span id="tempoValue" class="ml-2 text-gray-700">128</span>
                                    <span class="ml-1 text-gray-700">BPM</span>
                                </label>
                            </div>
                            <div>
                                <label class="flex items-center">
                                    <span class="mr-2 text-gray-700 whitespace-nowrap">Music Strategy:</span>
                                    <select
                                        id="musicStrategySelect"
                                        class="flex-grow p-2 border rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                    >
                                        <option value="default">Default Strategy</option>
                                        <option value="polysynthOrientation">PolySynth Orientation</option>
                                        <option value="simplePolysynth">Simple PolySynth</option>
                                        <option value="varyingInstruments">Varying Instruments</option>
                                    </select>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col space-y-4 md:border-l md:pl-6">
                        <button
                            type="button"
                            id="resetButton"
                            class="px-6 py-2 bg-red-500 text-white font-semibold rounded-md hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50 transition-colors"
                        >
                            Reset
                        </button>
                        <button
                            type="button"
                            id="playPauseButton"
                            class="px-6 py-2 bg-green-500 text-white font-semibold rounded-md hover:bg-green-600 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50 transition-colors"
                            disabled
                        >
                            Play
                        </button>
                    </div>
                </div>
            </div>
            <div id="result" class="bg-gray-100 p-6 rounded-lg"></div>
        </div>
        <script type="module" src="app.js"></script>
        <script>
            function createTempoTicks() {
                const tempoRange = document.getElementById("tempoRange");
                const tempoTicks = document.getElementById("tempoTicks");
                const min = parseInt(tempoRange.min);
                const max = parseInt(tempoRange.max);
                const step = 30; // Show a tick every 30 BPM

                for (let i = min; i <= max; i += step) {
                    const tick = document.createElement("div");
                    tick.className = "tempo-tick";
                    tick.style.left = `${((i - min) / (max - min)) * 100}%`;
                    tempoTicks.appendChild(tick);

                    const label = document.createElement("div");
                    label.className = "tempo-tick-label";
                    label.textContent = i;
                    label.style.left = `${((i - min) / (max - min)) * 100}%`;
                    tempoTicks.appendChild(label);
                }
            }

            document.addEventListener("DOMContentLoaded", () => {
                createTempoTicks();

                // Handle display density changes
                const displayDensity = document.getElementById("displayDensity");
                const container = document.querySelector(".max-w-6xl");

                displayDensity.addEventListener("change", (e) => {
                    container.classList.remove("density-cozy", "density-comfy", "density-compact");
                    container.classList.add(`density-${e.target.value}`);
                });
            });

            // Call this function when the DOM is loaded
            document.addEventListener("DOMContentLoaded", createTempoTicks);
        </script>
    </body>
</html>
